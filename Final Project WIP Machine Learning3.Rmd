---
title: "Final Practice Python"
author: "Katie Mears"
date: "2023-07-20"
output: html_document
---


```{python}
import pandas as pd
from sklearn.model_selection import train_test_split
import seaborn as sns
import matplotlib.pyplot as plt
import statsmodels.api as sm
```

```{python}

death_data = pd.read_csv('2015_data.csv')

# Display the first few rows of the data
print(death_data.head())
```

```{python}
column_titles = death_data.columns
print(column_titles)
```
```{python}
data_description_all = death_data.describe(include='all')
print(data_description_all)
```
```{python}
missing_values_count = death_data.isnull().sum()
print(missing_values_count)
```

```{python}
total_rows = death_data.shape[0]
percent_missing = (missing_values_count / total_rows) * 100
print(percent_missing)
```

```{python}
total_missing_values = death_data.isnull().sum().sum()
total_elements = death_data.size
total_percent_missing = (total_missing_values / total_elements) * 100
print("Total percentage of missing data in the dataset: {:.2f}%".format(total_percent_missing))
```


```{python}
desired_columns = ['education_2003_revision', 'month_of_death', 'sex', 'place_of_death_and_decedents_status', 'marital_status', 'day_of_week_of_death', 'injury_at_work', 'manner_of_death', 'method_of_disposition', 'autopsy', 'icd_code_10th_revision', '358_cause_recode', '113_cause_recode', '39_cause_recode', 'race','detail_age']
new_death = death_data[desired_columns]
print(new_death.head())
```

```{python}
total_missing_values2 = new_death.isnull().sum().sum()
total_elements2 = new_death.size
total_percent_missing2 = (total_missing_values2 / total_elements2) * 100
print("Total percentage of missing data in the sample dataset: {:.2f}%".format(total_percent_missing2))
```

```{python}
missing_values_count2 = new_death.isnull().sum()
total_rows2 = new_death.shape[0]
percent_missing = (missing_values_count2 / total_rows2) * 100
print(percent_missing)
```


```{python}
summary_stats = new_death.describe()
print(summary_stats)
```


```{python}
# Create Representative Sample from 2015 Population file 

# Identify the column on which you want to perform stratified sampling
stratify_column = 'manner_of_death' 

# Drop rows with missing values in the stratify column
death_data1 = new_death.dropna(subset=[stratify_column])

# Desired sample size
sample_size = 50000

# Perform stratified sampling to get a representative sample
sampled_data_death, _ = train_test_split(death_data1, train_size=sample_size, stratify=death_data1[stratify_column])

# Display the first few rows of the sampled data
print(sampled_data_death.head())
```





```{python}
education_2003_revision  = sampled_data_death['education_2003_revision']
sns.histplot(education_2003_revision, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('Histogram of education_2003_revision')
plt.show()
```


```{python}
month_of_death = sampled_data_death['month_of_death']
sns.histplot(month_of_death, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('Histogram of month_of_death')
plt.show()
```
```{python}
sex = sampled_data_death['sex']
sns.histplot(sex, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('Histogram of sex')
plt.show()
```



```{python}
place_of_death_and_decedents_status = sampled_data_death['place_of_death_and_decedents_status']
sns.histplot(place_of_death_and_decedents_status, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('Histogram of place_of_death_and_decedents_status')
plt.show()
```

```{python}
marital_status = sampled_data_death['marital_status']
sns.histplot(marital_status, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('marital_status')
plt.show()
```

```{python}
day_of_week_of_death = sampled_data_death['day_of_week_of_death']
sns.histplot(day_of_week_of_death, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('day_of_week_of_death')
plt.show()
```

```{python}
injury_at_work = sampled_data_death['injury_at_work']
sns.histplot(injury_at_work, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('injury_at_work')
plt.show()
```

```{python}
method_of_disposition = sampled_data_death['method_of_disposition']
sns.histplot(method_of_disposition, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('method_of_disposition')
plt.show()
```

```{python}
autopsy = sampled_data_death['autopsy']
sns.histplot(autopsy, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('autopsy')
plt.show()
```

```{python}
icd_code_10th_revision = sampled_data_death['icd_code_10th_revision']
sns.histplot(icd_code_10th_revision, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('icd_code_10th_revision')
plt.show()
```

```{python}
cause_recode358 = sampled_data_death['358_cause_recode']
sns.histplot(cause_recode358, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('358_cause_recode')
plt.show()
```

```{python}
cause_recode113 = sampled_data_death['113_cause_recode']
sns.histplot(cause_recode113, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('113_cause_recode')
plt.show()
```

```{python}
cause_recode39 = sampled_data_death['39_cause_recode']
sns.histplot(cause_recode39, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('39_cause_recode')
plt.show()
```

```{python}
race = sampled_data_death['race']
sns.histplot(race, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('race')
plt.show()
```

```{python}
detail_age = sampled_data_death['detail_age']
sns.histplot(detail_age, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('detail_age')
plt.show()
```

```{python}
manner_of_death = sampled_data_death['manner_of_death']
sns.histplot(manner_of_death, bins=10, color='skyblue', edgecolor='black')
plt.xlabel('Value')
plt.ylabel('Frequency')
plt.title('manner_of_death')
plt.show()
```




```{python}
# Select only numeric columns for the correlation analysis
numeric_columns = new_death.select_dtypes(include='number')
death_correlation_matrix = numeric_columns.corr()
print(death_correlation_matrix)
```


```{python}
# Plot the correlation matrix as a heatmap
plt.figure(figsize=(10, 8))
sns.heatmap(death_correlation_matrix, annot=True, cmap='coolwarm', fmt='.2f', linewidths=0.5)
plt.title('Death Correlation Matrix')
plt.show()
```





